---
# tasks file for export_system_tables
  - name: Insert Command 'ZTABEXP'
    sap_function_call:
      ZSXPG_COMMAND_INSERT:
        NAME: 'ZTABEXP'
        OPSYSTEM: 'Linux'
        OPCOMMAND: 'R3trans'
        PARAMETERS: '-w /tmp/exp_ecc.log /tmp/exp.ctl'
    register: comm_insert
    tags: linux

  - name: Insert Command 'ZTABEXP'
    sap_function_call:
      ZSXPG_COMMAND_INSERT:
        NAME: 'ZTABEXP'
        OPSYSTEM: 'Linux'
        OPCOMMAND: 'R3trans'
        PARAMETERS: "-w {{ ansible_env.TEMP }}\exp_ecc.log {{ ansible_env.TEMP }}\exp.ctl"
    register: comm_insert
    tags: windows

  - debug: var=comm_insert

  - name: Execute Command 'ZTABEXP'
    sap_function_call:
      SXPG_COMMAND_EXECUTE:
        NAME: "ZTABEXP"
    register: comm_execute
    tags:
      - windows
      - linux

  - debug: var=comm_execute